(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(33)},19:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),o=t(12),a=t.n(o),c=(t(19),t(5)),u=t(3),d=t(8),l=t(6),s=t(9),h=t(13),f=t.n(h),p=t(1),v=t(7),g=t.n(v),b=t(2),O=function e(n){return n.id=g.a.generate(),n.children&&0!==n.children.length&&n.children.forEach(function(n){return e(n)}),n},m=function(e){return k(e).props.document},j=function(e){return Object(b.clone)(m(e).state.node)},y=function(e,n){var t=m(e);t.setState(n),t.onChange()},P=function(e,n){return e.id===n?{grandParent:null,parent:null,child:e}:E(null,e,n)},k=function e(n){var t=n.props.parent;return t?e(t):n},E=function e(n,t,r){var i,o,a=Object(b.find)(t.children,{id:r});if(a)return{grandParent:n,parent:t,child:a};for(o=0;o<t.children.length;o++){if(i=e(t,t.children[o],r))break}return i},w=function(e,n){C(e,n)&&(e.preventDefault(),x(n,n.getCaretPosition()))},N=function(e,n){D(e,n)&&(e.preventDefault(),H(n,n.getCaretPosition()))},C=function(e,n){return Object(p.a)(n.contentEditable.current).top<=n.getLineHeight()},D=function(e,n){return n.contentEditable.current.clientHeight-Object(p.a)(n.contentEditable.current).top<=n.getLineHeight()},x=function(e,n){var t,r,i;(t=K(e))&&(r=(i=L(e))?i.children.length>0?M(i):i:t.props.node,y(e,{focusedNode:r.id,caretPosition:n}))},H=function(e,n){var t,r;(t=(r=V(e)).length>0?r[0]:B(e))&&y(e,{focusedNode:t.id,caretPosition:n})},K=function(e){return e.props.parent},V=function(e){return e.props.node.children},L=function(e){var n=K(e);if(!n)return null;var t=V(n);return t[t.indexOf(e.props.node)-1]||null},M=function e(n){var t=n.children[n.children.length-1];return t.children.length>0?e(t):t},B=function e(n){var t=K(n);if(!t)return null;var r=V(t),i=r.indexOf(n.props.node);return r[i+1]?r[i+1]:e(t)},J=function(e,n){0===n.state.children.length&&0===Object(p.a)(n.contentEditable.current).pos&&(e.preventDefault(),R(n))},R=function(e){var n,t=j(e),r=P(t,e.props.node.id),i=r.parent,o=r.child;if(S(o,i))n=i;else{var a=i.children.indexOf(o);n=W(i.children[a-1])}var c=n.value.length;n.value="".concat(n.value).concat(o.value),Object(b.remove)(i.children,{id:o.id}),y(e,{focusedNode:n.id,caretPosition:c,node:t})},S=function(e,n){return 0===n.children.indexOf(e)},W=function e(n){return 0===n.children.length?n:e(n.children[n.children.length-1])},F=function(e,n){e.preventDefault(),I(n,"append")},I=function(e){var n=U(e),t=n.prevNodeValue,r=n.nextNodeValue,i=$(r),o=j(e),a=P(o,e.props.node.id),c=a.parent,u=a.child;0===e.props.node.children.length?c.children.splice(c.children.indexOf(u)+1,0,i):u.children.unshift(i),u.value=t,y(e,{focusedNode:i.id,caretPosition:0,node:o})},U=function(e){var n=Object(p.a)(e.contentEditable.current).pos,t=e.state.value;return{prevNodeValue:t.slice(0,n),nextNodeValue:t.slice(n,t.length)}},$=function(e){return{id:g.a.generate(),type:"text",value:e,children:[]}},q=function(e,n){return e.preventDefault(),e.shiftKey?A(n):z(n)},z=function(e){var n=j(e),t=P(n,e.props.node.id),r=t.parent,i=t.child;if(r){var o=r.children,a=o[o.indexOf(i)-1];a&&(a.children.push(i),Object(b.remove)(o,{id:i.id}),y(e,{focusedNode:i.id,caretPosition:e.getCaretPosition()}))}},A=function(e){var n=j(e),t=P(n,e.props.node.id),r=t.grandParent,i=t.parent,o=t.child;if(i&&r){Object(b.remove)(i.children,{id:o.id});var a=r.children.indexOf(i);r.children.splice(a+1,0,o),y(e,{focusedNode:o.id,caretPosition:e.getCaretPosition()})}},G=function(e){var n=m(e).state;if(n.focusedNode===e.state.id){var t=e.contentEditable.current,r=e.state.value;0===r.length?t.focus():r.length<n.caretPosition?Object(p.a)(t,r.length):Object(p.a)(t,n.caretPosition)}},Q=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(d.a)(this,Object(l.a)(n).call(this,e))).keyMap={8:J,9:q,13:F,38:w,40:N},t.state=t.props.node,t.contentEditable=i.a.createRef(),t}return Object(s.a)(n,e),Object(u.a)(n,null,[{key:"getDerivedStateFromProps",value:function(e,n){return n!==e.node?e.node:null}}]),Object(u.a)(n,[{key:"componentDidMount",value:function(){G(this)}},{key:"componentDidUpdate",value:function(){G(this)}},{key:"onKeyDown",value:function(e){var n=this.keyMap[e.keyCode];if(n)return n.call(this,e,this)}},{key:"getLineHeight",value:function(){return 24}},{key:"getCaretPosition",value:function(){return Object(p.a)(this.contentEditable.current).pos}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"node"},i.a.createElement(f.a,{innerRef:this.contentEditable,className:"node-self",html:this.state.value,onKeyDown:function(n){return e.onKeyDown(n)},onChange:function(n){return function(e,n){var t=j(n),r=P(t,n.props.node.id).child,i=n.getCaretPosition();r.value=e.target.value,m(n).state.focusedNode===r.id?y(n,{caretPosition:i,node:t}):y(n,{node:t})}(n,e)}}),this.state.children.map(function(t,r){return i.a.createElement(n,{key:t.id,parent:e,node:t})}))}}]),n}(i.a.Component),T=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(d.a)(this,Object(l.a)(n).call(this,e))).state={focusedNode:null,caretPosition:null,node:O(window.DOC)},t}return Object(s.a)(n,e),Object(u.a)(n,[{key:"onChange",value:function(){this.props.onChange&&this.props.onChange(this.state.node)}},{key:"render",value:function(){return i.a.createElement("div",{className:"document"},i.a.createElement(Q,{node:this.state.node,document:this}))}}]),n}(i.a.Component);var X=function(){return i.a.createElement(T,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.100d2ebb.chunk.js.map