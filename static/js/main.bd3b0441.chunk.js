(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(32)},18:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),a=t(6),c=t.n(a),o=(t(18),t(7)),l=t(8),u=t(11),d=t(9),h=t(12),s=t(10),f=t.n(s),v=t(1),p=t.n(v),y=t(3),m=t.n(y),k=function e(n,t,i){var r,a,c=Object(v.find)(t.children,{id:i});if(c)return{grandParent:n,parent:t,child:c};for(a=0;a<t.children.length;a++){if(r=e(t,t.children[a],i))break}return r},g=function(){return{id:m.a.generate(),type:"text",value:"",children:[],focus:!0}},w=function(e,n){var t=function e(n){var t=n.props.parent;return t?e(t):n}(e),i=function(e){return Object(v.clone)(e.props.node)}(t);!function e(n){return n.focus=!1,n.children&&0!==n.children.length&&n.children.forEach(function(n){return e(n)}),n}(i);var r=function(e,n){return e.id===n?{grandParent:null,parent:null,child:e}:k(null,e,n)}(i,e.state.id),a=r.grandParent,c=r.parent;n(r.child,c,a),t.setState(i)},b=function e(n){return n.id=m.a.generate(),n.focus=!1,n.children&&0!==n.children.length&&n.children.forEach(function(n){return e(n)}),n},E=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(u.a)(this,Object(d.a)(n).call(this,e))).keyMap={8:"handleBackspaceKey",9:"handleTabKey",13:"handleEnterKey",38:"handleUpKey",40:"handleDownKey"},t.contentEditable=r.a.createRef(),t.state={id:t.props.node.id,type:t.props.node.type,value:t.props.node.value,focus:t.props.node.focus,children:t.props.node.children},t}return Object(h.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.handleFocus()}},{key:"componentDidUpdate",value:function(){this.handleFocus()}},{key:"handleFocus",value:function(){this.props.node.focus&&this.contentEditable.current.focus()}},{key:"handleInput",value:function(e){var n,t;this.setState({value:e.target.value}),n=this,t=e.target.value,w(n,function(e){e.value=t,e.focus=!0})}},{key:"onKeyDown",value:function(e){var n=this.keyMap[e.keyCode];if(n)return this[n](e)}},{key:"handleUpKey",value:function(e){w(this,function(e,n){var t=n.children.indexOf(e);if(0!==t){var i=n.children[t-1];if(i){if(i.children.length>0)return void(i.children[i.children.length-1].focus=!0);i.focus=!0}}else n.focus=!0})}},{key:"handleDownKey",value:function(e){w(this,function(e,n,t){if(e.children.length>0)e.children[0].focus=!0;else{var i=n.children.indexOf(e),r=n.children[i+1];if(r)r.focus=!0;else if(t){var a=t.children.indexOf(n),c=t.children[a+1];if(c)return void(c.focus=!0)}}})}},{key:"handleBackspaceKey",value:function(e){""===this.state.value&&0===this.state.children.length&&(e.preventDefault(),w(this,function(e,n){var t=n.children.indexOf(e);0===t?n.focus=!0:n.children[t-1].focus=!0,p.a.remove(n.children,{id:e.id})}))}},{key:"handleEnterKey",value:function(e){e.preventDefault(),0===this.state.children.length?w(this,function(e,n){n.children.splice(n.children.indexOf(e)+1,0,g())}):function(e){w(e,function(e){e.children.unshift(g())})}(this)}},{key:"handleTabKey",value:function(e){e.preventDefault(),e.shiftKey?w(this,function(e,n,t){if(n&&t){p.a.remove(n.children,{id:e.id});var i=t.children.indexOf(n);e.focus=!0,t.children.splice(i+1,0,e)}}):function(e){w(e,function(e,n){if(n){var t=n.children,i=t[t.indexOf(e)-1];i&&(e.focus=!0,i.children.push(e),p.a.remove(t,{id:e.id}))}})}(this)}},{key:"classNames",value:function(){var e="node";return this.props.root&&(e="".concat(e," is-root")),e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.classNames()},r.a.createElement(f.a,{innerRef:this.contentEditable,className:"node-self",html:this.state.value,onKeyDown:function(n){return e.onKeyDown(n)},onChange:function(n){return e.handleInput(n)}}),this.state.children.map(function(t,i){return r.a.createElement(n,{key:t.id,parent:e,node:t})}))}}]),n}(r.a.Component);function O(){var e=b(window.DOC);return r.a.createElement("div",{className:"document"},r.a.createElement(E,{node:e,root:!0}))}var K=function(){return r.a.createElement(O,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.bd3b0441.chunk.js.map